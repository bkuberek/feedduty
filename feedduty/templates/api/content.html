{% extends "api/base.html" %}
{% block content %}
<ul class="breadcrumb">
  {%- for comp in request.path.strip('/').split('/') %}
  {% if comp == 'api' %}
  <li><a href="{{ request.route_path('api.main') }}">API Root</a></li>
  {% elif loop.last %}
  <li class="active">{{ request.path.strip('/').split('/')[-1:][0] }}</li>
  {% else %}
  <li><a href="{{ request.route_path('api.main') }}/{{ comp }}">{{ comp }}</a></li>
  {% endif %}
  {%- endfor %}
</ul>
<h1>{{ request.matched_route.name|replace('collection_', '')|replace('resource', '')|title }}</h1>
<h4>Request</h4>
<pre>{{ request.http_version }} {{ request.method }} {{ request.path }}
{%- for header in request.headers.items() %}
{{ header[0] }}: {{ header[1] }}
{%- endfor %}</pre>
<h4>Response</h4>
<pre>{{ request.response.status }}
{%- for header in request.response.headers.items() %}
{{ header[0] }}: {{ header[1] }}
{%- endfor %}</pre>
<pre>{{ json_response }}</pre>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">
      {% if request.matched_route.name.startswith('collection') %}
      Create a new record
      {% else %}
      Edit this record
      {% endif %}
    </h3>
  </div>
  {% if form %}
  <div class="panel-body">
    <form role="form">
      {%- for field in form %}
      <div class="form-group">
        {{ field.label }}
        {{ field(class='form-control') }}
      </div>
      {%- endfor %}
      {% if request.matched_route.name.startswith('collection') %}
      <button type="submit" name="post" class="btn btn-default">Create</button>
      {% else %}
      <button type="submit" name="put" class="btn btn-default">Update</button>
      <button type="submit" name="delete" class="btn btn-default">Delete</button>
      {% endif %}
    </form>
  </div>
  {% endif %}
</div>
{% endblock %}
